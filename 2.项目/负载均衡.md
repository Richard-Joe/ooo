# 1. 什么是负载均衡？

一种充当反向代理的设备，将网络或应用流量分配与多个服务器，以提高并发能力和可用性。

工作层：

- 3层：根据IP分发请求，比如等价路由（ECMP）
- 4层：根据TCP、UDP分发请求，比如LVS
- 7层：根据HTTP、HTTPS分发请求，比如Nginx

解决场景：

- 负载分担：分担业务压力，通过某种算法将负载分发到各个服务器上。
- 安全：客户不知道真实的服务器。
- 故障隔离：某个服务器出现故障时，无人工干预的情况下自动被隔离。
- 高可用：后端服务器在故障、升级、重启的情况下，能不间断为客户提供服务。
- 其他：访问控制、流量监控等

# 2. 概念和组件

概念：kubernetes service

提供能力的组件：

- kube-proxy（iptables、ipvs）
- cilium ebpf
- metallb

# 3. service原理

# 4. kube-proxy

## 4.1. iptables
## 4.2. ipvs

# 5. cilium

# 6. metallb
